@using AutoCrudAdmin.Enumerations
@using static AutoCrudAdmin.Constants.CssClassNames
@model IEnumerable<AutoCrudAdmin.ViewModels.FormControlViewModel>

<style>
    .form-group {
        margin-bottom: 0;
    }

    .form-check-input {
        margin-left: 0.5rem;
    }
    
    ul.ui-autocomplete {
        list-style: none;
        padding: 0;
        margin: 0;
        cursor: default;
        
        max-height:200px; 
        max-width: 236px; 
        
        overflow-x:hidden;
        overflow-y:scroll;
    }
    
    .ui-helper-hidden-accessible {
        display: none;
    }
</style>

@foreach (var formControl in Model)
{
    var isCheckbox = formControl.Value is bool;
    var inputClassName = isCheckbox ? FormCheckboxInput : FormControl;
    var labelClassName = isCheckbox ? FormCheckboxLabel : string.Empty;
    var hiddenAttribute = formControl.IsHidden ? "hidden" : string.Empty;


    <div class="@FormGroup" @hiddenAttribute>
        <label class="@labelClassName">@formControl.DisplayName</label>
        <formInput
            for-type="@formControl.Type"
            for-form-control-type="@formControl.FormControlType"
            for-name="@formControl.Name"
            with-value="@formControl.Value"
            with-options="@formControl.Options"
            is-hidden="@formControl.IsHidden"
            is-db-set="@formControl.IsDbSet"
            is-readonly="@formControl.IsReadOnly"
            http-context="@Context"
            readonly="@formControl.IsReadOnly"
            class="@inputClassName">
        </formInput>
    </div>

    if (formControl.FormControlType == FormControlType.Autocomplete)
    {
        @await Html.PartialAsync("Autocomplete/_AutocompletePartial", formControl);
    }
    else if (formControl.FormControlType == FormControlType.AutocompleteExtended)
    {
        @await Html.PartialAsync("Autocomplete/_AutocompleteExtendedPartial", formControl);
    }
}

<script type="text/javascript">
   $(function () {
       $(".datetimepicker").flatpickr({
           enableTime: true,
           dateFormat: "d/m/Y G:i K"
       });
   });
</script>